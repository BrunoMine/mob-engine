--[[
= Chicken for Creatures MOB-Engine (cme) =
Copyright (C) 2020 Mob API Developers and Contributors
Copyright (C) 2015-2016 BlockMen <blockmen2015@gmail.com>

nest.lua

This software is provided 'as-is', without any express or implied warranty. In no
event will the authors be held liable for any damages arising from the use of
this software.

Permission is granted to anyone to use this software for any purpose, including
commercial applications, and to alter it and redistribute it freely, subject to the
following restrictions:

1. The origin of this software must not be misrepresented; you must not
claim that you wrote the original software. If you use this software in a
product, an acknowledgment in the product documentation is required.
2. Altered source versions must be plainly marked as such, and must not
be misrepresented as being the original software.
3. This notice may not be removed or altered from any source distribution.
]]

--[[
	2020-05-20

	As per License's rule number 2:
	- Modified by h4ml3t to add localization (translation) file support.
--]]

-- Used for localization

local S = minetest.get_translator("chicken")

-- Feeder definitions
local feeder_node_def = {
	description = S("Seed Feeder"),
	drawtype = "nodebox",
	paramtype = "light",
	paramtype2 = "facedir",
	node_box = {
		type = "fixed",
		fixed = { -- Created with NodeBoxEditor
			{-0.25, -0.375, -0.1875, -0.1875, 0.25, 0.1875},
			{0.1875, -0.375, -0.1875, 0.25, 0.25, 0.1875},
			{-0.1875, -0.375, 0.1875, 0.1875, 0.25, 0.25},
			{-0.1875, -0.375, -0.25, 0.1875, 0.25, -0.1875},
			{0.1875, -0.5, -0.25, 0.25, 0.25, -0.1875},
			{0.1875, -0.5, 0.1875, 0.25, 0.25, 0.25},
			{-0.25, -0.5, 0.1875, -0.1875, 0.25, 0.25},
			{-0.25, -0.5, -0.25, -0.1875, 0.25, -0.1875},
		}
	},
	selection_box = {
		type = "fixed",
		fixed = {-0.25, -0.5, -0.25, 0.25, 0.25, 0.25},
	},
	collision_box = {
		type = "fixed",
		fixed = {-0.25, -0.5, -0.25, 0.25, 0.5, 0.25},
	},
	tiles = {
		"(chicken_feeder_seeds.png^(default_junglewood.png^chicken_feeder_layer_top.png^[makealpha:76,255,0))", -- Top
		"(chicken_feeder_seeds.png^(default_junglewood.png^chicken_feeder_layer_top.png^[makealpha:76,255,0))", -- Bottom
		"(chicken_feeder_seeds.png^(default_junglewood.png^chicken_feeder_layer_side.png^[makealpha:76,255,0))", -- Right
		"(chicken_feeder_seeds.png^(default_junglewood.png^chicken_feeder_layer_side.png^[makealpha:76,255,0))", -- Left
		"(chicken_feeder_seeds.png^(default_junglewood.png^chicken_feeder_layer_side.png^[makealpha:76,255,0))", -- Back
		"(chicken_feeder_seeds.png^(default_junglewood.png^chicken_feeder_layer_side.png^[makealpha:76,255,0))" -- Front
	},
	sunlight_propagates = true,
	groups = {snappy = 3, attached_node = 1, flammable = 1},
	sounds = default.node_sound_wood_defaults()
}

local node_steps_def = {

	{ node_box = { type = "fixed", fixed = { -- 1
		{-0.25, -0.375, -0.1875, -0.1875, 0.25, 0.1875},
		{0.1875, -0.375, -0.1875, 0.25, 0.25, 0.1875},
		{-0.1875, -0.375, 0.1875, 0.1875, 0.25, 0.25},
		{-0.1875, -0.375, -0.25, 0.1875, 0.25, -0.1875},
		{0.1875, -0.5, -0.25, 0.25, 0.25, -0.1875},
		{0.1875, -0.5, 0.1875, 0.25, 0.25, 0.25},
		{-0.25, -0.5, 0.1875, -0.1875, 0.25, 0.25},
		{-0.25, -0.5, -0.25, -0.1875, 0.25, -0.1875},
		{-0.1875, -0.5, -0.3125, 0.1875, -0.375, 0.3125},
		{-0.3125, -0.5, -0.1875, 0.3125, -0.375, 0.1875},
		{-0.375, -0.5, -0.125, 0.375, -0.4375, 0.125},
		{-0.125, -0.5, -0.375, 0.125, -0.4375, 0.375}}},
	},

	{ node_box = { type = "fixed", fixed = { -- 2
		{-0.25, -0.375, -0.1875, -0.1875, 0.25, 0.1875},
		{0.1875, -0.375, -0.1875, 0.25, 0.25, 0.1875},
		{-0.1875, -0.375, 0.1875, 0.1875, 0.25, 0.25},
		{-0.1875, -0.375, -0.25, 0.1875, 0.25, -0.1875},
		{0.1875, -0.5, -0.25, 0.25, 0.25, -0.1875},
		{0.1875, -0.5, 0.1875, 0.25, 0.25, 0.25},
		{-0.25, -0.5, 0.1875, -0.1875, 0.25, 0.25},
		{-0.25, -0.5, -0.25, -0.1875, 0.25, -0.1875},
		{-0.1875, -0.5, -0.3125, 0.1875, -0.375, 0.3125},
		{-0.3125, -0.5, -0.1875, 0.3125, -0.375, 0.1875},
		{-0.375, -0.5, -0.125, 0.375, -0.4375, 0.125},
		{-0.125, -0.5, -0.375, 0.125, -0.4375, 0.375},
		{-0.125, -0.5, -0.375, 0.125, -0.4375, 0.375},
		{-0.0625, -0.5, -0.375, 0.0625, -0.375, 0.375},
		{-0.0625, -0.5, -0.4375, 0.0625, -0.4375, 0.4375},
		{-0.375, -0.5, -0.125, 0.375, -0.4375, 0.125},
		{-0.375, -0.5, -0.0625, 0.375, -0.375, 0.0625},
		{-0.4375, -0.5, -0.0625, 0.4375, -0.4375, 0.0625},
		{-0.4375, -0.5, -0.375, -0.375, -0.4375, -0.3125},
		{-0.1875, -0.5, -0.1875, 0.1875, -0.3125, 0.1875}}},
	},

	{ node_box = { type = "fixed", fixed = { -- 3
		{-0.25, -0.375, -0.1875, -0.1875, 0.25, 0.1875},
		{0.1875, -0.375, -0.1875, 0.25, 0.25, 0.1875},
		{-0.1875, -0.375, 0.1875, 0.1875, 0.25, 0.25},
		{-0.1875, -0.375, -0.25, 0.1875, 0.25, -0.1875},
		{0.1875, -0.5, -0.25, 0.25, 0.25, -0.1875},
		{0.1875, -0.5, 0.1875, 0.25, 0.25, 0.25},
		{-0.25, -0.5, 0.1875, -0.1875, 0.25, 0.25},
		{-0.25, -0.5, -0.25, -0.1875, 0.25, -0.1875},
		{-0.1875, -0.5, -0.3125, 0.1875, -0.375, 0.3125},
		{-0.3125, -0.5, -0.1875, 0.3125, -0.375, 0.1875},
		{-0.375, -0.5, -0.125, 0.375, -0.4375, 0.125},
		{-0.125, -0.5, -0.375, 0.125, -0.4375, 0.375},
		{-0.125, -0.5, -0.375, 0.125, -0.4375, 0.375},
		{-0.0625, -0.5, -0.375, 0.0625, -0.375, 0.375},
		{-0.0625, -0.5, -0.4375, 0.0625, -0.4375, 0.4375},
		{-0.375, -0.5, -0.125, 0.375, -0.4375, 0.125},
		{-0.375, -0.5, -0.0625, 0.375, -0.375, 0.0625},
		{-0.4375, -0.5, -0.0625, 0.4375, -0.4375, 0.0625},
		{0.375, -0.5, 0.25, 0.4375, -0.4375, 0.3125},
		{-0.4375, -0.5, -0.375, -0.375, -0.4375, -0.3125},
		{-0.1875, -0.5, -0.1875, 0.1875, -0.25, 0.1875},
		{0.125, -0.5, 0.375, 0.1875, -0.4375, 0.4375},
		{-0.3125, -0.5, 0.3125, -0.25, -0.4375, 0.375},
		{0.375, -0.5, -0.375, 0.4375, -0.4375, -0.3125}}},
	},

	{ node_box = { type = "fixed", fixed = { -- 4
		{-0.25, -0.375, -0.1875, -0.1875, 0.25, 0.1875},
		{0.1875, -0.375, -0.1875, 0.25, 0.25, 0.1875},
		{-0.1875, -0.375, 0.1875, 0.1875, 0.25, 0.25},
		{-0.1875, -0.375, -0.25, 0.1875, 0.25, -0.1875},
		{0.1875, -0.5, -0.25, 0.25, 0.25, -0.1875},
		{0.1875, -0.5, 0.1875, 0.25, 0.25, 0.25},
		{-0.25, -0.5, 0.1875, -0.1875, 0.25, 0.25},
		{-0.25, -0.5, -0.25, -0.1875, 0.25, -0.1875},
		{-0.1875, -0.5, -0.3125, 0.1875, -0.375, 0.3125},
		{-0.3125, -0.5, -0.1875, 0.3125, -0.375, 0.1875},
		{-0.375, -0.5, -0.125, 0.375, -0.4375, 0.125},
		{-0.125, -0.5, -0.375, 0.125, -0.4375, 0.375},
		{-0.125, -0.5, -0.375, 0.125, -0.4375, 0.375},
		{-0.0625, -0.5, -0.375, 0.0625, -0.375, 0.375},
		{-0.0625, -0.5, -0.4375, 0.0625, -0.4375, 0.4375},
		{-0.375, -0.5, -0.125, 0.375, -0.4375, 0.125},
		{-0.375, -0.5, -0.0625, 0.375, -0.375, 0.0625},
		{-0.4375, -0.5, -0.0625, 0.4375, -0.4375, 0.0625},
		{0.375, -0.5, 0.25, 0.4375, -0.4375, 0.3125},
		{-0.4375, -0.5, -0.375, -0.375, -0.4375, -0.3125},
		{-0.1875, -0.5, -0.1875, 0.1875, 0, 0.1875},
		{0.125, -0.5, 0.375, 0.1875, -0.4375, 0.4375},
		{-0.3125, -0.5, 0.3125, -0.25, -0.4375, 0.375},
		{0.375, -0.5, -0.375, 0.4375, -0.4375, -0.3125},
		{-0.375, -0.5, 0.375, -0.3125, -0.4375, 0.4375},
		{0.25, -0.5, 0.3125, 0.3125, -0.4375, 0.375},
		{0.25, -0.5, -0.3125, 0.3125, -0.4375, -0.25},
		{-0.375, -0.5, -0.3125, -0.3125, -0.4375, -0.25}}},
	},

	{ node_box = { type = "fixed", fixed = { -- 5
		{-0.25, -0.375, -0.1875, -0.1875, 0.25, 0.1875},
		{0.1875, -0.375, -0.1875, 0.25, 0.25, 0.1875},
		{-0.1875, -0.375, 0.1875, 0.1875, 0.25, 0.25},
		{-0.1875, -0.375, -0.25, 0.1875, 0.25, -0.1875},
		{0.1875, -0.5, -0.25, 0.25, 0.25, -0.1875},
		{0.1875, -0.5, 0.1875, 0.25, 0.25, 0.25},
		{-0.25, -0.5, 0.1875, -0.1875, 0.25, 0.25},
		{-0.25, -0.5, -0.25, -0.1875, 0.25, -0.1875},
		{-0.1875, -0.5, -0.3125, 0.1875, -0.375, 0.3125},
		{-0.3125, -0.5, -0.1875, 0.3125, -0.375, 0.1875},
		{-0.375, -0.5, -0.125, 0.375, -0.4375, 0.125},
		{-0.125, -0.5, -0.375, 0.125, -0.4375, 0.375},
		{-0.125, -0.5, -0.375, 0.125, -0.4375, 0.375},
		{-0.0625, -0.5, -0.375, 0.0625, -0.375, 0.375},
		{-0.0625, -0.5, -0.4375, 0.0625, -0.4375, 0.4375},
		{-0.375, -0.5, -0.125, 0.375, -0.4375, 0.125},
		{-0.375, -0.5, -0.0625, 0.375, -0.375, 0.0625},
		{-0.4375, -0.5, -0.0625, 0.4375, -0.4375, 0.0625},
		{0.375, -0.5, 0.25, 0.4375, -0.4375, 0.3125},
		{-0.4375, -0.5, -0.375, -0.375, -0.4375, -0.3125},
		{-0.1875, -0.5, -0.1875, 0.1875, 0.125, 0.1875},
		{0.125, -0.5, 0.375, 0.1875, -0.4375, 0.4375},
		{-0.3125, -0.5, 0.3125, -0.25, -0.4375, 0.375},
		{0.375, -0.5, -0.375, 0.4375, -0.4375, -0.3125},
		{-0.375, -0.5, 0.375, -0.3125, -0.4375, 0.4375},
		{0.25, -0.5, 0.3125, 0.3125, -0.4375, 0.375},
		{0.25, -0.5, -0.3125, 0.3125, -0.4375, -0.25},
		{-0.375, -0.5, -0.3125, -0.3125, -0.4375, -0.25},
		{-0.3125, -0.5, -0.4375, -0.25, -0.4375, -0.375},
		{-0.4375, -0.5, 0.25, -0.375, -0.4375, 0.3125}}},
	},

	{ node_box = { type = "fixed", fixed = { -- 6
		{-0.25, -0.375, -0.1875, -0.1875, 0.25, 0.1875},
		{0.1875, -0.375, -0.1875, 0.25, 0.25, 0.1875},
		{-0.1875, -0.375, 0.1875, 0.1875, 0.25, 0.25},
		{-0.1875, -0.375, -0.25, 0.1875, 0.25, -0.1875},
		{0.1875, -0.5, -0.25, 0.25, 0.25, -0.1875},
		{0.1875, -0.5, 0.1875, 0.25, 0.25, 0.25},
		{-0.25, -0.5, 0.1875, -0.1875, 0.25, 0.25},
		{-0.25, -0.5, -0.25, -0.1875, 0.25, -0.1875},
		{-0.1875, -0.5, -0.3125, 0.1875, -0.375, 0.3125},
		{-0.3125, -0.5, -0.1875, 0.3125, -0.375, 0.1875},
		{-0.375, -0.5, -0.125, 0.375, -0.4375, 0.125},
		{-0.125, -0.5, -0.375, 0.125, -0.4375, 0.375},
		{-0.125, -0.5, -0.375, 0.125, -0.4375, 0.375},
		{-0.0625, -0.5, -0.375, 0.0625, -0.375, 0.375},
		{-0.0625, -0.5, -0.4375, 0.0625, -0.4375, 0.4375},
		{-0.375, -0.5, -0.125, 0.375, -0.4375, 0.125},
		{-0.375, -0.5, -0.0625, 0.375, -0.375, 0.0625},
		{-0.4375, -0.5, -0.0625, 0.4375, -0.4375, 0.0625},
		{0.375, -0.5, 0.25, 0.4375, -0.4375, 0.3125},
		{-0.4375, -0.5, -0.375, -0.375, -0.4375, -0.3125},
		{-0.1875, -0.5, -0.1875, 0.1875, 0.25, 0.1875},
		{0.125, -0.5, 0.375, 0.1875, -0.4375, 0.4375},
		{-0.3125, -0.5, 0.3125, -0.25, -0.4375, 0.375},
		{0.375, -0.5, -0.375, 0.4375, -0.4375, -0.3125},
		{-0.375, -0.5, 0.375, -0.3125, -0.4375, 0.4375},
		{0.25, -0.5, 0.3125, 0.3125, -0.4375, 0.375},
		{0.25, -0.5, -0.3125, 0.3125, -0.4375, -0.25},
		{-0.375, -0.5, -0.3125, -0.3125, -0.4375, -0.25},
		{-0.3125, -0.5, -0.4375, -0.25, -0.4375, -0.375},
		{-0.4375, -0.5, 0.25, -0.375, -0.4375, 0.3125},
		{-0.4375, -0.5, 0.125, -0.375, -0.4375, 0.1875},
		{0.375, -0.5, 0.125, 0.4375, -0.4375, 0.1875},
		{0.3125, -0.5, -0.3125, 0.375, -0.4375, -0.25}}},
	},

	{ node_box = { type = "fixed", fixed = { -- 7
		{-0.25, -0.375, -0.1875, -0.1875, 0.25, 0.1875},
		{0.1875, -0.375, -0.1875, 0.25, 0.25, 0.1875},
		{-0.1875, -0.375, 0.1875, 0.1875, 0.25, 0.25},
		{-0.1875, -0.375, -0.25, 0.1875, 0.25, -0.1875},
		{0.1875, -0.5, -0.25, 0.25, 0.25, -0.1875},
		{0.1875, -0.5, 0.1875, 0.25, 0.25, 0.25},
		{-0.25, -0.5, 0.1875, -0.1875, 0.25, 0.25},
		{-0.25, -0.5, -0.25, -0.1875, 0.25, -0.1875},
		{-0.1875, -0.5, -0.3125, 0.1875, -0.375, 0.3125},
		{-0.3125, -0.5, -0.1875, 0.3125, -0.375, 0.1875},
		{-0.375, -0.5, -0.125, 0.375, -0.4375, 0.125},
		{-0.125, -0.5, -0.375, 0.125, -0.4375, 0.375},
		{-0.125, -0.5, -0.375, 0.125, -0.4375, 0.375},
		{-0.0625, -0.5, -0.375, 0.0625, -0.375, 0.375},
		{-0.0625, -0.5, -0.4375, 0.0625, -0.4375, 0.4375},
		{-0.375, -0.5, -0.125, 0.375, -0.4375, 0.125},
		{-0.375, -0.5, -0.0625, 0.375, -0.375, 0.0625},
		{-0.4375, -0.5, -0.0625, 0.4375, -0.4375, 0.0625},
		{0.375, -0.5, 0.25, 0.4375, -0.4375, 0.3125},
		{-0.4375, -0.5, -0.375, -0.375, -0.4375, -0.3125},
		{-0.1875, -0.5, -0.1875, 0.1875, 0.3125, 0.1875},
		{0.125, -0.5, 0.375, 0.1875, -0.4375, 0.4375},
		{-0.3125, -0.5, 0.3125, -0.25, -0.4375, 0.375},
		{0.375, -0.5, -0.375, 0.4375, -0.4375, -0.3125},
		{-0.375, -0.5, 0.375, -0.3125, -0.4375, 0.4375},
		{0.25, -0.5, 0.3125, 0.3125, -0.4375, 0.375},
		{0.25, -0.5, -0.3125, 0.3125, -0.4375, -0.25},
		{-0.375, -0.5, -0.3125, -0.3125, -0.4375, -0.25},
		{-0.3125, -0.5, -0.4375, -0.25, -0.4375, -0.375},
		{-0.4375, -0.5, 0.25, -0.375, -0.4375, 0.3125},
		{-0.4375, -0.5, 0.125, -0.375, -0.4375, 0.1875},
		{0.375, -0.5, 0.125, 0.4375, -0.4375, 0.1875},
		{0.3125, -0.5, -0.3125, 0.375, -0.4375, -0.25},
		{-0.125, 0.3125, -0.125, 0.125, 0.375, 0.125},
		{0.125, -0.5, -0.5, 0.1875, -0.4375, -0.4375}}},
	},

	{ node_box = { type = "fixed", fixed = { -- 8
		{-0.25, -0.375, -0.1875, -0.1875, 0.25, 0.1875},
		{0.1875, -0.375, -0.1875, 0.25, 0.25, 0.1875},
		{-0.1875, -0.375, 0.1875, 0.1875, 0.25, 0.25},
		{-0.1875, -0.375, -0.25, 0.1875, 0.25, -0.1875},
		{0.1875, -0.5, -0.25, 0.25, 0.25, -0.1875},
		{0.1875, -0.5, 0.1875, 0.25, 0.25, 0.25},
		{-0.25, -0.5, 0.1875, -0.1875, 0.25, 0.25},
		{-0.25, -0.5, -0.25, -0.1875, 0.25, -0.1875},
		{-0.1875, -0.5, -0.3125, 0.1875, -0.375, 0.3125},
		{-0.3125, -0.5, -0.1875, 0.3125, -0.375, 0.1875},
		{-0.375, -0.5, -0.125, 0.375, -0.4375, 0.125},
		{-0.125, -0.5, -0.375, 0.125, -0.4375, 0.375},
		{-0.125, -0.5, -0.375, 0.125, -0.4375, 0.375},
		{-0.0625, -0.5, -0.375, 0.0625, -0.375, 0.375},
		{-0.0625, -0.5, -0.4375, 0.0625, -0.4375, 0.4375},
		{-0.375, -0.5, -0.125, 0.375, -0.4375, 0.125},
		{-0.375, -0.5, -0.0625, 0.375, -0.375, 0.0625},
		{-0.4375, -0.5, -0.0625, 0.4375, -0.4375, 0.0625},
		{0.375, -0.5, 0.25, 0.4375, -0.4375, 0.3125},
		{-0.4375, -0.5, -0.375, -0.375, -0.4375, -0.3125},
		{-0.1875, -0.5, -0.1875, 0.1875, 0.4375, 0.1875},
		{0.125, -0.5, 0.375, 0.1875, -0.4375, 0.4375},
		{-0.3125, -0.5, 0.3125, -0.25, -0.4375, 0.375},
		{0.375, -0.5, -0.375, 0.4375, -0.4375, -0.3125},
		{-0.375, -0.5, 0.375, -0.3125, -0.4375, 0.4375},
		{0.25, -0.5, 0.3125, 0.3125, -0.4375, 0.375},
		{0.25, -0.5, -0.3125, 0.3125, -0.4375, -0.25},
		{-0.375, -0.5, -0.3125, -0.3125, -0.4375, -0.25},
		{-0.3125, -0.5, -0.4375, -0.25, -0.4375, -0.375},
		{-0.4375, -0.5, 0.25, -0.375, -0.4375, 0.3125},
		{-0.4375, -0.5, 0.125, -0.375, -0.4375, 0.1875},
		{0.375, -0.5, 0.125, 0.4375, -0.4375, 0.1875},
		{0.3125, -0.5, -0.3125, 0.375, -0.4375, -0.25},
		{-0.125, 0.4375, -0.125, 0.125, 0.5, 0.125},
		{0.125, -0.5, -0.5, 0.1875, -0.4375, -0.4375}}},
	}
}


creatures.make_feeder_nodes("chicken:seed_feeder", {

	supply = {
		["farming:seed_wheat"] = { food = 1, count = 15 },
		["farming:seed_cotton"] = { food = 1, count = 15 },
	},

	disable_infotext = true,

	max_food = 70,

	node_def = feeder_node_def,

	steps_def = {
		{ food =   1, node_def = node_steps_def[1]  },
		{ food =  10, node_def = node_steps_def[2]  },
		{ food =  20, node_def = node_steps_def[3]  },
		{ food =  30, node_def = node_steps_def[4]  },
		{ food =  40, node_def = node_steps_def[5]  },
		{ food =  50, node_def = node_steps_def[6]  },
		{ food =  60, node_def = node_steps_def[7]  },
		{ food =  70, node_def = node_steps_def[8]  }
	}
})

minetest.register_craft({
	output = 'chicken:seed_feeder',
	recipe = {
		{'group:stick', '', 'group:stick'},
		{'default:junglewood', 'farming:seed_wheat', 'default:junglewood'},
		{'group:stick', '', 'group:stick'},
	}
})
